<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>End-of-Life Choice Guide – Prototype</title>
  <style>
    :root {
      --bg: #fafafa;
      --panel: #ffffff;
      --ink: #1b1f24;
      --muted: #5a6472;
      --line: #e6e7ea;
      --accent: #2b7a78;
      --accent-2: #def2f1;
      --focus: #1b9aaa;
      --danger: #b00020;
    }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", Helvetica, Arial, "Segoe UI", Roboto, system-ui, sans-serif;
      color: var(--ink);
      background: linear-gradient(180deg, var(--bg), #f4f6f8);
    }

    .wrap { max-width: 920px; margin: 0 auto; padding: 24px; }

    header {
      display: flex; align-items: center; justify-content: space-between; gap: 16px; flex-wrap: wrap;
      padding: 12px 0 24px;
      border-bottom: 1px solid var(--line);
    }
    .brand { display: flex; align-items: center; gap: 12px; }
    .logo {
      inline-size: 38px; block-size: 38px; border-radius: 8px;
      background: radial-gradient(circle at 30% 30%, var(--accent-2), #cfe9e7 60%, #bfe1de 100%);
      border: 1px solid var(--line);
    }
    .brand h1 { font-size: 18px; font-weight: 600; margin: 0; letter-spacing: .25px; }
    .tag { color: var(--muted); font-size: 14px; }

    .progress {
      display: grid; grid-template-columns: repeat(6, 1fr); gap: 8px; margin-top: 16px;
    }
    .dot { height: 6px; border-radius: 999px; background: #dfe3e8; }
    .dot.is-active { background: var(--accent); }

    main { margin-top: 24px; }

    .panel {
      background: var(--panel);
      border: 1px solid var(--line);
      border-radius: 16px;
      box-shadow: 0 10px 24px rgba(0,0,0,.04);
      overflow: clip;
    }

    .step { display: none; padding: 24px; }
    .step.is-current { display: block; }

    .step h2 { margin: 0 0 6px; font-size: 24px; font-weight: 600; }
    .lead { color: var(--muted); margin: 0 0 18px; }

    fieldset { border: 0; margin: 0; padding: 0; }
    .group { display: grid; gap: 12px; margin: 16px 0 18px; }

    .choice {
      display: grid; grid-template-columns: 20px 1fr; gap: 12px; align-items: start;
      padding: 12px 14px; border: 1px solid var(--line); border-radius: 12px; background: #fff;
    }
    .choice:hover { border-color: var(--accent); }

    .row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
    @media (max-width: 720px) { .row { grid-template-columns: 1fr; } }

    label { font-weight: 600; font-size: 14px; }
    .help { color: var(--muted); font-size: 14px; }

    select, input[type="text"], textarea {
      width: 100%; padding: 12px 14px; border-radius: 10px; border: 1px solid var(--line);
      font-size: 15px; background: #fff;
    }

    .toolbar { display: flex; gap: 12px; align-items: center; justify-content: space-between; padding: 16px; border-top: 1px solid var(--line); background: #fff; }
    .toolbar .side { display: flex; gap: 12px; align-items: center; }

    .btn {
      appearance: none; border: 1px solid var(--line); background: #fff; color: var(--ink);
      padding: 10px 14px; border-radius: 12px; font-size: 15px; cursor: pointer;
    }
    .btn:focus { outline: 3px solid var(--focus); outline-offset: 2px; }
    .btn.primary { background: var(--accent); color: #fff; border-color: var(--accent); }
    .btn.ghost { background: transparent; }
    .btn[disabled] { opacity: .6; cursor: not-allowed; }

    .notice { background: var(--accent-2); padding: 12px 14px; border-radius: 10px; border: 1px solid #cfe1e0; font-size: 14px; }

    .results { display: grid; gap: 16px; }
    .card { border: 1px solid var(--line); border-radius: 14px; padding: 16px; background: #fff; }
    .card h3 { margin: 0 0 10px; font-size: 18px; }
    .small { font-size: 13px; color: var(--muted); }
    .list { margin: 0; padding-left: 18px; }

    .kicker { text-transform: uppercase; letter-spacing: .12em; font-size: 12px; color: var(--muted); }

    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); border: 0; }
    [aria-live] { min-height: 1em; }
  </style>
</head>
<body>
  <div class="wrap" role="application" aria-label="End-of-Life Choice Guide prototype">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>End-of-Life Choice Guide</h1>
          <div class="tag">Info and tools for confident decisions in a few easy clicks</div>
        </div>
      </div>
      <div style="min-width:220px;">
        <div class="kicker" id="progressLabel" aria-live="polite">Step 1 of 6</div>
        <div class="progress" aria-hidden="true">
          <div class="dot is-active"></div>
          <div class="dot"></div>
          <div class="dot"></div>
          <div class="dot"></div>
          <div class="dot"></div>
          <div class="dot"></div>
        </div>
      </div>
    </header>

    <main>
      <div class="panel" id="wizard" aria-live="polite">
        <!-- Step 1: Welcome -->
        <section class="step is-current" id="step-1" data-step="1" tabindex="-1">
          <h2>Need information or support for end-of-life decisions? Let us help.</h2>
          <p class="lead">Answer a few short questions and we’ll create a personalized page with information that fits your situation. You can save it, share it with others, and revisit it anytime.</p>
          <div class="group">
            <div class="notice">Your responses are private and will not be saved on this website.</div>
            <div>
              <p class="help" style="margin-bottom:4px; font-weight:600;">If you are in distress</p>
              <p class="help" style="margin-top:0;">Please contact Crisis Services at 1-833-456-4566 or <a href="#" target="_blank" rel="noreferrer">click here</a> to find immediate support near you.</p>
            </div>
          </div>
        </section>

        <!-- Step 2: Who for -->
        <section class="step" id="step-2" data-step="2" tabindex="-1">
          <h2>I need information for…</h2>
          <fieldset class="group" aria-describedby="whoHelp">
            <legend class="sr-only">Select who you’re seeking information for</legend>
            <div id="whoHelp" class="help">Choose the option that best fits you right now.</div>
            <label class="choice"><input type="radio" name="who" value="self"/> <div><div>Myself</div><div class="help">I’m exploring options.</div></div></label>
            <label class="choice"><input type="radio" name="who" value="family"/> <div><div>Someone close to me</div><div class="help">I’m supporting a spouse, partner, family member or loved one.</div></div></label>
            <label class="choice"><input type="radio" name="who" value="professional"/> <div><div>Someone I support professionally</div><div class="help">I’m a healthcare or allied services professional, service provider or volunteer.</div></div></label>
          </fieldset>
        </section>

        <!-- Step 3: What brings you here -->
        <section class="step" id="step-3" data-step="3" tabindex="-1">
          <h2>What brings you here today?</h2>
          <fieldset class="group">
            <legend class="sr-only">Choose your main focus</legend>
            <label class="choice"><input type="radio" name="phase" value="learn"/> <div><div>I want to learn about MAID</div><div class="help">I want to understand MAID and other options.</div></div></label>
            <label class="choice"><input type="radio" name="phase" value="considering"/> <div><div>I’m considering MAID</div><div class="help">I want help getting an assessment, finding a witness, or locating forms.</div></div></label>
            <label class="choice"><input type="radio" name="phase" value="caregiver"/> <div><div>I’m a primary caregiver</div><div class="help">I need guidance to help me support my loved one.</div></div></label>
            <label class="choice"><input type="radio" name="phase" value="supporting"/> <div><div>I’m supporting someone else</div><div class="help">I need resources to help a patient, client or someone else.</div></div></label>
          </fieldset>

          <div class="group">
            <label>Other topics you want to learn about</label>
            <label class="choice"><input type="checkbox" name="supports" value="endoflife"/> <div><div>End-of-life care</div><div class="help">Understanding hospice, palliative care and comfort-focused options.</div></div></label>
            <label class="choice"><input type="checkbox" name="supports" value="advance"/> <div><div>Advance planning</div><div class="help">Guidance for documenting your wishes and communicating with loved ones.</div></div></label>
            <label class="choice"><input type="checkbox" name="supports" value="grief"/> <div><div>Support for grief, caregivers and families</div><div class="help">Connect with counselling, peer groups and other resources.</div></div></label>
          </div>
        </section>

        <!-- Step 4: Coverage and location -->
        <section class="step" id="step-4" data-step="4" tabindex="-1">
          <h2>Are you or the person you’re supporting covered by Canada’s healthcare system? </h2>
          <p class="lead">In Canada, you must be eligible for publicly funded health services to qualify for access to medical assistance in dying.</p>

          <fieldset class="group">
            <legend class="sr-only">Healthcare coverage</legend>
            <label class="choice"><input type="radio" name="coverage" value="yes"/> <div><div>Yes</div><div class="help">I’d like information specific to my provincial or territorial healthcare system.</div></div></label>
            <label class="choice"><input type="radio" name="coverage" value="no"/> <div><div>No</div><div class="help">I’m looking for general information and resources.</div></div></label>
          </fieldset>

          <div class="row">
            <div>
              <label for="province">Province or territory</label>
              <select id="province">
                <option value="">Prefer not to say</option>
                <option>Alberta</option>
                <option>British Columbia</option>
                <option>Manitoba</option>
                <option>New Brunswick</option>
                <option>Newfoundland and Labrador</option>
                <option>Nova Scotia</option>
                <option>Ontario</option>
                <option>Prince Edward Island</option>
                <option>Quebec</option>
                <option>Saskatchewan</option>
                <option>Northwest Territories</option>
                <option>Nunavut</option>
                <option>Yukon</option>
              </select>
              <div class="help">If you prefer not to say, we’ll show national information instead.</div>
            </div>
            <div>
              <label for="postal">Postal code (optional)</label>
              <input id="postal" type="text" placeholder="e.g., M5V 2T6" />
              <div class="help">Used to surface local support options. This information remains private and is not stored.</div>
            </div>
          </div>
        </section>

        <!-- Step 5: Priorities -->
        <section class="step" id="step-5" data-step="5" tabindex="-1">
          <h2>What matters most to you right now?</h2>
          <fieldset class="group">
            <legend class="sr-only">Select your priorities</legend>
            <label class="choice"><input type="checkbox" name="values" value="autonomy"/> <div><div>Autonomy and control</div><div class="help">Understanding choices and making my own decisions.</div></div></label>
            <label class="choice"><input type="checkbox" name="values" value="comfort"/> <div><div>Comfort and relief</div><div class="help">Managing pain and minimizing distress.</div></div></label>
            <label class="choice"><input type="checkbox" name="values" value="time"/> <div><div>Time with loved ones</div><div class="help">Enjoying moments that matter.</div></div></label>
            <label class="choice"><input type="checkbox" name="values" value="peace"/> <div><div>Peace of mind</div><div class="help">Access to emotional, spiritual or cultural support.</div></div></label>
          </fieldset>
          <div class="group">
            <label for="notes">Anything you’d like to add? (optional)</label>
            <textarea id="notes" rows="3" placeholder="This will be included in your personal summary."></textarea>
          </div>
        </section>

        <!-- Step 6: Results -->
        <section class="step" id="step-6" data-step="6" tabindex="-1">
          <h2>Your End-of-Life Care Choice Guide</h2>
          <p class="lead">Based on your responses, this page includes links to information, tools and resources that may be the most helpful to you right now.</p>

          <div class="results">
            <article class="card" id="toldCard">
              <h3>What you told us</h3>
              <div id="toldText" class="small"></div>
            </article>

            <article class="card" id="lookingCard">
              <h3>You’re looking for</h3>
              <ul class="list" id="lookingList"></ul>
            </article>

            <article class="card" id="prioritiesCard">
              <h3>Your priorities</h3>
              <ul class="list" id="valuesList"></ul>
              <div id="userNotes" class="small"></div>
            </article>

            <article class="card">
              <h3>Find what you need?</h3>
              <div class="group">
                <button class="btn" id="btnSave" type="button">Save</button>
                <button class="btn" id="btnPrint" type="button">Print</button>
                <button class="btn ghost" id="btnRestart" type="button">Start over</button>
              </div>
              <p class="small">This information will be stored in your browser, but not on our website.</p>
            </article>

            <article class="card">
              <h3>Top resources for you</h3>
              <ul class="list" id="resourcesList">
                <li>End-of-life care options</li>
                <li>How MAID works</li>
                <li>Things to consider</li>
                <li>Feelings about MAID</li>
                <li>Supporting a dying person</li>
                <li>Tasks for substitute decision-makers</li>
                <li>The final days</li>
                <li>Are you burning out? How to find support</li>
                <li>Ontario support directory: grief, bereavement, palliative care and other resources</li>
                <li>Ontario MAID requests</li>
              </ul>
            </article>

            <article class="card">
              <h3>Forms</h3>
              <ul class="list" id="formsList">
                <li>MAID request form (PDF)</li>
                <li>Clinician Aid D-1 Final Waiver of Consent (PDF)</li>
                <li>Clinician Aid D-2 Advance Consent – Self-Administration</li>
              </ul>
            </article>

            <article class="card">
              <h3>Links</h3>
              <ul class="list" id="linksList">
                <li>Provincial MAID team</li>
                <li>Find an independent witness</li>
                <li>Government of Ontario: MAID and end-of-life decisions</li>
              </ul>
            </article>

            <article class="card">
              <h3>Featured stories</h3>
              <ul class="list" id="storiesList">
                <li>Choosing the day for MAID</li>
                <li>How Jan chose MAID – and then changed her mind</li>
                <li>Family conversations about MAID</li>
              </ul>
            </article>

            <article class="card">
              <h3>Contact Dying with Dignity Canada</h3>
              <p class="small">We can answer general questions about MAID or help with navigation support.</p>
              <ul class="list">
                <li>Email: support@dyingwithdignity.ca</li>
                <li>Toll-free: 1-866-286-4023</li>
                <li>TTY: 1-844-953-3350</li>
              </ul>
            </article>

            <article class="card small" style="text-align:center;">
              <div>WeCanChoose.ca by Dying With Dignity Canada</div>
            </article>
          </div>
        </section>

        <div class="toolbar" role="group" aria-label="Wizard navigation">
          <div class="side">
            <button class="btn" id="backBtn" type="button">Back</button>
          </div>
          <div class="side">
            <button class="btn ghost" id="skipBtn" type="button">Skip</button>
            <button class="btn primary" id="nextBtn" type="button">Next</button>
          </div>
        </div>
      </div>
    </main>

  </div>

  <script>
    const steps = Array.from(document.querySelectorAll('.step'));
    const dots = Array.from(document.querySelectorAll('.dot'));
    const progressLabel = document.getElementById('progressLabel');
    const nextBtn = document.getElementById('nextBtn');
    const backBtn = document.getElementById('backBtn');
    const skipBtn = document.getElementById('skipBtn');

    const state = {
      step: 1,
      who: '',
      phase: '',
      supports: [],
      coverage: '',
      province: '',
      postal: '',
      values: [],
      notes: ''
    };

    function setStep(n) {
      state.step = Math.min(Math.max(n, 1), steps.length);
      steps.forEach((s) => s.classList.remove('is-current'));
      const current = document.querySelector(`#step-${state.step}`);
      current.classList.add('is-current');
      current.focus();
      dots.forEach((d, i) => d.classList.toggle('is-active', i < state.step));
      progressLabel.textContent = `Step ${state.step} of ${steps.length}`;
      backBtn.disabled = state.step === 1;
      nextBtn.textContent = state.step === steps.length ? 'Finish' : 'Next';
      skipBtn.style.visibility = state.step === steps.length ? 'hidden' : 'visible';
    }

    function gather() {
      state.who = document.querySelector('input[name="who"]:checked')?.value || state.who;
      state.phase = document.querySelector('input[name="phase"]:checked')?.value || state.phase;
      state.supports = Array.from(document.querySelectorAll('input[name="supports"]:checked')).map(x => x.value);
      state.coverage = document.querySelector('input[name="coverage"]:checked')?.value || state.coverage;
      state.province = document.getElementById('province').value || state.province;
      state.postal = document.getElementById('postal').value.trim();
      state.values = Array.from(document.querySelectorAll('input[name="values"]:checked')).map(x => x.value);
      state.notes = document.getElementById('notes').value.trim();
    }

    function validate(step) {
      if (step === 2 && !document.querySelector('input[name="who"]:checked')) return false;
      if (step === 3 && !document.querySelector('input[name="phase"]:checked')) return false;
      return true;
    }

    function buildResults() {
      const whoMap = {
        self: 'for yourself',
        family: 'for someone close to you',
        professional: 'for someone you support professionally'
      };
      const phaseMap = {
        learn: 'You want to understand MAID and other options.',
        considering: 'You are considering MAID and need help with assessments, witnesses, or forms.',
        caregiver: 'You are a primary caregiver and need guidance to support a loved one.',
        supporting: 'You are supporting a patient, client, or someone else and need resources.'
      };

      const where = state.province && state.province !== '' ? state.province : 'Canada';
      const whoText = whoMap[state.who] || 'for your situation';
      const phaseText = phaseMap[state.phase] || 'You are seeking information about end-of-life options.';

      const lines = [];
      lines.push(`You are looking ${whoText}, located in ${where}.`);
      lines.push(phaseText);

      if (state.coverage === 'yes') {
        lines.push('You told us you are covered by Canada’s publicly funded healthcare system.');
      } else if (state.coverage === 'no') {
        lines.push('You told us you are not covered by Canada’s publicly funded healthcare system or are unsure. We are showing general information and resources.');
      }

      document.getElementById('toldText').textContent = lines.join(' ');

      const lookingList = document.getElementById('lookingList');
      lookingList.innerHTML = '';

      const lookingItems = [];
      if (state.phase === 'considering') {
        lookingItems.push('MAID assessments, witnesses or forms for your region.');
      }
      if (state.phase === 'learn') {
        lookingItems.push('Plain-language information on how MAID works and other options.');
      }
      if (state.phase === 'caregiver') {
        lookingItems.push('Guidance to help you support a loved one at end of life.');
      }
      if (state.phase === 'supporting') {
        lookingItems.push('Resources to help a patient, client or someone else.');
      }

      const supportMap = {
        endoflife: 'Information about hospice, palliative care and comfort-focused options.',
        advance: 'Guidance for documenting wishes and talking with loved ones about plans.',
        grief: 'Counselling, peer groups and other supports for grief, caregivers and families.'
      };
      state.supports.forEach(key => {
        if (supportMap[key]) lookingItems.push(supportMap[key]);
      });

      if (!lookingItems.length) {
        lookingItems.push('General information on MAID and end-of-life care options.');
      }

      lookingItems.forEach(text => {
        const li = document.createElement('li');
        li.textContent = text;
        lookingList.appendChild(li);
      });

      const valuesList = document.getElementById('valuesList');
      valuesList.innerHTML = '';
      const valMap = {
        autonomy: 'Autonomy and control',
        comfort: 'Comfort and relief',
        time: 'Time with loved ones',
        peace: 'Peace of mind'
      };

      if (state.values.length) {
        state.values.forEach(k => {
          const li = document.createElement('li');
          li.textContent = valMap[k] || k;
          valuesList.appendChild(li);
        });
      } else {
        const li = document.createElement('li');
        li.textContent = 'No specific priorities selected.';
        valuesList.appendChild(li);
      }

      document.getElementById('userNotes').textContent = state.notes ? `Your note: ${state.notes}` : '';
    }

    nextBtn.addEventListener('click', () => {
      gather();
      if (!validate(state.step)) { nextBtn.focus(); return; }
      if (state.step < steps.length) {
        setStep(state.step + 1);
        if (state.step === steps.length) buildResults();
      } else {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }
    });

    backBtn.addEventListener('click', () => {
      setStep(state.step - 1);
    });

    skipBtn.addEventListener('click', () => {
      setStep(state.step + 1);
      if (state.step === steps.length) buildResults();
    });

    document.getElementById('btnPrint')?.addEventListener('click', () => window.print());
    document.getElementById('btnSave')?.addEventListener('click', () => window.print());
    document.getElementById('btnRestart')?.addEventListener('click', () => { location.reload(); });

    setStep(1);
  </script>
</body>
</html>
